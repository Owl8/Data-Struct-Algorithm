ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ 2015å¹´11æœˆ18æ—¥ 23æ™‚05åˆ†53ç§’
 ã«é–‹å§‹ã—ã¾ã—ãŸ]0;owl@owlinux220: ~/prog/algorithm/stackowl@owlinux220:~/prog/algorithm/stack$ cat stack.c
#include <stdio.h>
#include <stdlib.h>

struct stackData_{
	struct stackData_* before;
	int data;
};
typedef struct stackData_ stackData;

void initStack(stackData**);
void push(stackData**, int); 
int pop(stackData**);
void printStack(stackData**);
void deleteStack(stackData**);

int main(void) {
	int endFlag;
	stackData stack;
	stackData* pstack = &stack;
	initStack(&pstack);
	puts("Input i, d, m, p or q.");
	for(endFlag = 0;!endFlag;) {
		int pushData;
		int popNum;
		int i;
		char cmd;
		do {
			cmd = getchar();
		} while (cmd == '\n');
		switch(cmd) {
			case 'i':
				scanf("%d", &pushData);
				push(&pstack, pushData);
				break;
			case 'd':
				pop(&pstack);
				break;
			case 'm':
				scanf("%d", &popNum);
				for (i = 0; i < popNum; ++i) {
					if (pstack->before == NULL) {
						pop(&pstack);
						break;
					}
					pop(&pstack);
				}
				break;
			case 'p':
				printStack(&pstack);
				putchar('\n');
				break;
			case 'q':
				deleteStack(&pstack);
				endFlag = 1;
				break;
			default:
				puts("Input i, d, m, p or q.");
		}
	}
	return 0;
}

void initStack(stackData** stack) {
	(*stack)->before = NULL;
}

void push(stackData** stack, int pushData) {
	stackData* newStack = (stackData*)malloc(sizeof(stackData));
	newStack->before = *stack;
	newStack->data = pushData;
	*stack = newStack;
}

int pop(stackData** stack) {
	int ret = (*stack)->data;
	stackData* beforeStack = (*stack)->before;
	if (beforeStack == NULL) {
		puts("Stack is empty.");
		return 0;
	}
	free(*stack);
	*stack = beforeStack;
	return ret;
}

void printStack(stackData** stack) {
	if ((*stack)->before != NULL) {
		printf("%d ", (*stack)->data);
		printStack(&((*stack)->before));
	}
}

void deleteStack(stackData** stack) {
	if ((*stack)->before != NULL) {
		stackData* beforeStack = (*stack)->before;
		free(*stack);
		deleteStack(&beforeStack);
	}
}
]0;owl@owlinux220: ~/prog/algorithm/stackowl@owlinux220:~/prog/algorithm/stack$ gcc stack.c 
]0;owl@owlinux220: ~/prog/algorithm/stackowl@owlinux220:~/prog/algorithm/stack$ ./a.out 
Input i, d, m, p or q.
p

i
10  1
i
2
i
3
i
4
p
4 3 2 1 
d
p
3 2 1 
dp 
p
2 1 
i
5
i
8
p
8 5 2 1 
m
3
p
1 
m
2
Stack is empty.
d
Stack is empty.
q
]0;owl@owlinux220: ~/prog/algorithm/stackowl@owlinux220:~/prog/algorithm/stack$ exit
exit

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ 2015å¹´11æœˆ18æ—¥ 23æ™‚07åˆ†07ç§’
 ã«çµ‚äº†ã—ã¾ã—ãŸ
